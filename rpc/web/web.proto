syntax = "proto3";

package web;
option go_package="./web";

message ArticleListReq {
  uint32 cid = 1;
  uint32 page = 2;
  uint32 page_size = 3;
  uint32 types = 4;
  uint32 tid = 5;
  string keywords = 6;
}
message ArticleListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message ArticleReq {
  uint32 id = 1;
  string client_ip = 2; // 客户端IP，用于浏览次数记录
}
message ArticleResp {
  string data = 1;
}

message ArticleLikeReq {
  uint32 id = 1;
}
message ArticleLikeResp {
  string data = 1;
}

message CategoryListReq {
  uint32 page = 1;
  uint32 page_size = 2;
}
message CategoryListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message ChatListReq {
  uint32 page = 1;
  uint32 page_size = 2;
}
message ChatListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message CommentListReq {
  uint32 page = 1;
  uint32 page_size = 2;
}
message CommentListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message OrderListReq {
  uint32 page = 1;
  uint32 page_size = 2;
}
message OrderListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message OrderStatReq {
}
message OrderStatResp {
  float total_amount = 1;
  int64 count = 2;
  float month_amount = 3;
}

message TagsListReq {
}
message TagsListResp {
  string list = 1;
}

message ColumnListReq {
}
message ColumnListResp {
  string list = 1;
}

message BookListReq {
  uint32 page = 1;
  uint32 page_size = 2;
  uint32 column = 3;
  string keywords = 4;
}
message BookListResp {
  uint32 page = 1;
  uint32 page_size = 2;
  string list = 3;
  uint32 total = 4;
}

message BookReq {
  uint32 id = 1;
}
message BookResp {
  string data = 1;
}

message BookChapterReq {
  uint32 id = 1;
}
message BookChapterResp {
  string data = 1;
}

message DocsListReq {
  int32 category_id = 1;
  string level = 2;
  string sort_by = 3;
  string sort_order = 4;
  string keywords = 5;
  int32 page = 6;
  int32 page_size = 7;
  string tag = 8;
}
message DocsListResp {
  int32 page = 1;
  int32 page_size = 2;
  string list = 3;
  int64 total = 4;
}

message DocsCategoriesReq {
}
message DocsCategoriesResp {
  string list = 1;
}

message DocsStatsReq {
}
message DocsStatsResp {
  int64 total_docs = 1;
  int64 total_categories = 2;
  int64 total_views = 3;
  int64 total_likes = 4;
}

message DocsPopularReq {
  int32 limit = 1;
}
message DocsPopularResp {
  string list = 1;
}

message DocsLatestReq {
  int32 limit = 1;
}
message DocsLatestResp {
  string list = 1;
}

message DocsTagsReq {
}
message DocsTagsResp {
  string list = 1;
}

message DocsReq {
  int64 id = 1;
  string client_ip = 2; // 客户端IP，用于浏览次数记录
}
message DocsResp {
  string data = 1;
}

message DocsUpdateReq {
  int64 id = 1;
  string content = 2;
}
message DocsUpdateResp {
  string status = 1;
  int64 id = 2;
}

service Web {
  rpc ArticleList(ArticleListReq) returns(ArticleListResp);
  rpc Article(ArticleReq) returns(ArticleResp);
  rpc ArticleLike(ArticleLikeReq) returns(ArticleLikeResp);
  rpc CategoryList(CategoryListReq) returns(CategoryListResp);
  rpc ChatList(ChatListReq) returns(ChatListResp);
  rpc CommentList(CommentListReq) returns(CommentListResp);
  rpc OrderList(OrderListReq) returns(OrderListResp);
  rpc OrderStat(OrderStatReq) returns(OrderStatResp);
  rpc TagsList(TagsListReq) returns(TagsListResp);
  rpc ColumnList(ColumnListReq) returns(ColumnListResp);
  rpc BookList(BookListReq) returns(BookListResp);
  rpc Book(BookReq) returns(BookResp);
  rpc BookChapter(BookChapterReq) returns(BookChapterResp);

  rpc DocsList(DocsListReq) returns(DocsListResp);
  rpc DocsCategories(DocsCategoriesReq) returns(DocsCategoriesResp);
  rpc DocsStats(DocsStatsReq) returns(DocsStatsResp);
  rpc DocsPopular(DocsPopularReq) returns(DocsPopularResp);
  rpc DocsLatest(DocsLatestReq) returns(DocsLatestResp);
  rpc DocsTags(DocsTagsReq) returns(DocsTagsResp);
  rpc Docs(DocsReq) returns(DocsResp);
  rpc DocsUpdate(DocsUpdateReq) returns(DocsUpdateResp);
}

//goctl rpc protoc web.proto --go_out=. --go-grpc_out=. --zrpc_out=. -m